image: gitpod/workspace-full

tasks:
    - name: setup
      before: |
        sudo apt-key adv --keyserver hkp://keyserver.ubuntu.com:80 --recv-keys 0xB1998361219BD9C9
        sudo apt-add-repository -y "deb http://repos.azulsystems.com/ubuntu stable main"
        sudo apt-get update
        sudo apt-get install -y zulu24-jdk

        sudo update-alternatives --install /usr/bin/java java /usr/lib/jvm/zulu24*/bin/java 1
        sudo update-alternatives --install /usr/bin/javac javac /usr/lib/jvm/zulu24*/bin/javac 1
        sudo update-alternatives --set java /usr/lib/jvm/zulu24*/bin/java
        sudo update-alternatives --set javac /usr/lib/jvm/zulu24*/bin/javac

        java -version

    - name: Redis + Maven Setup
      init: |
        sudo apt-get update
        sudo apt-get install -y redis-server
        sudo service redis-server start
      command: |
        /mvnw clean install

vscode:
  extensions:
    - vscjava.vscode-java-pack
    - redhat.java